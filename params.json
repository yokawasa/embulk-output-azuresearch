{
  "name": "embulk-output-azuresearch",
  "tagline": "Azure Search output plugin for Embulk",
  "body": "# Azure Search output plugin for Embulk\r\n\r\nembulk-output-azuresearch is an embulk output plugin that dumps records to Azure Search. Embulk is a open-source bulk data loader that helps data transfer between various databases, storages, file formats, and cloud services. See [Embulk documentation](http://www.embulk.org/docs/) for details.\r\n\r\n## Overview\r\n\r\n* **Plugin type**: output\r\n* **Load all or nothing**: no\r\n* **Resume supported**: no\r\n* **Cleanup supported**: yes\r\n\r\n## Installation\r\n\r\n    $ gem install fluent-plugin-azuresearch\r\n\r\n## Configuration\r\n\r\n### Azure Search\r\n\r\nTo use Microsoft Azure Search, you must create an Azure Search service in the Azure Portal. Also you must have an index, persisted storage of documents to which embulk-output-azuresearch writes event stream out. Here are instructions:\r\n\r\n * [Create a service](https://azure.microsoft.com/en-us/documentation/articles/search-create-service-portal/)\r\n * [Create an index](https://azure.microsoft.com/en-us/documentation/articles/search-what-is-an-index/)\r\n\r\n\r\n<u>Sample Index Schema: sampleindex01</u>\r\n\r\n```json\r\n{\r\n    \"name\": \"sampleindex01\",\r\n    \"fields\": [\r\n        { \"name\":\"id\", \"type\":\"Edm.String\", \"key\": true, \"searchable\": false },\r\n        { \"name\":\"title\", \"type\":\"Edm.String\", \"analyzer\":\"en.microsoft\" },\r\n        { \"name\":\"speakers\", \"type\":\"Edm.String\" },\r\n        { \"name\":\"url\", \"type\":\"Edm.String\", \"searchable\": false, \"filterable\":false, \"sortable\":false, \"facetable\":false },\r\n        { \"name\":\"text\", \"type\":\"Edm.String\", \"filterable\":false, \"sortable\":false, \"facetable\":false, \"analyzer\":\"en.microsoft\" }\r\n    ]\r\n}\r\n```\r\n\r\n\r\n### Embulk Configuration (config.yml)\r\n\r\n```yaml\r\nout:\r\n  type: azuresearch\r\n  endpoint: https://yoichikademo.search.windows.net\r\n  api_key:  9E55964F8254BB4504DX3F66A39AF5EB\r\n  search_index: sampleindex01\r\n  column_names: id,title,speakers,text,url\r\n  key_names: id,title,speakers,description,link\r\n```\r\n\r\n * **endpoint (required)** - Azure Search service endpoint URI\r\n * **api\\_key (required)** - Azure Search API key\r\n * **search\\_index (required)** - Azure Search Index name to insert records\r\n * **column\\_names (required)** - Column names in a target Azure search index. Each column needs to be separated by a comma.\r\n * **key\\_names (optional)** - Default:nil. Key names in incomming record to insert. Each key needs to be separated by a comma. By default, **key\\_names** is as same as **column\\_names**\r\n\r\n\r\n## Sample Configurations\r\n\r\n### (1) Case: column_names and key_names are same\r\n\r\nSuppose you have the following config.yml and sample azure search index schema written above:\r\n\r\n<u>config.yml</u>\r\n\r\n```yaml\r\nin:\r\n  type: file\r\n  path_prefix: samples/sample_01.csv\r\n  parser:\r\n    charset: UTF-8\r\n    newline: CRLF\r\n    type: csv\r\n    delimiter: ','\r\n    quote: '\"'\r\n    escape: '\"'\r\n    null_string: 'NULL'\r\n    trim_if_not_quoted: false\r\n    skip_header_lines: 1\r\n    allow_extra_columns: false\r\n    allow_optional_columns: false\r\n    columns:\r\n    - {name: id, type: string}\r\n    - {name: title, type: string}\r\n    - {name: speakers, type: string}\r\n    - {name: text, type: string}\r\n    - {name: url, type: string}\r\nout:\r\n  type: azuresearch\r\n  endpoint: https://yoichikademo.search.windows.net\r\n  api_key:  9E55964F8254BBXX04D53F66A39AF5EB\r\n  search_index: sampleindex01\r\n  column_names: id,title,speakers,text,url\r\n```\r\n\r\nThe plugin will dump records out to Azure Ssearch like this:\r\n\r\n<u>Input CSV</u>\r\n\r\n```csv\r\nid,title,speakers,text,url\r\n1,Moving to the Cloud,Narayan Annamalai,Benefits of moving your applications to cloud,https://s.ch9.ms/Events/Build/2016/P576\r\n2,Building Big Data Applications using Spark and Hadoop,Maxim Lukiyanov,How to leverage Spark to build intelligence into your application,https://s.ch9.ms/Events/Build/2016/P420\r\n3,Service Fabric Deploying and Managing Applications with Service Fabric,Chacko Daniel,Service Fabric deploys and manages distributed applications built as microservices,https://s.ch9.ms/Events/Build/2016/P431\r\n```\r\n\r\n<u>Output JSON Body to Azure Search</u>\r\n\r\n```json\r\n{\"value\":\r\n    [\r\n        {\"id\":\"1\",\"title\":\"Moving to the Cloud\",\"speakers\":\"Narayan Annamalai\",\"text\":\"Benefits of moving your applications to cloud\",\"url\":\"https://s.ch9.ms/Events/Build/2016/P576\",\"@search.action\":\"mergeOrUpload\"},\r\n        {\"id\":\"2\",\"title\":\"Building Big Data Applications using Spark and Hadoop\",\"speakers\":\"Maxim Lukiyanov\",\"text\":\"How to leverage Spark to build intelligence into your application\",\"url\":\"https://s.ch9.ms/Events/Build/2016/P420\",\"@search.action\":\"mergeOrUpload\"},\r\n        {\"id\":\"3\",\"title\":\"Service Fabric Deploying and Managing Applications with Service Fabric\",\"speakers\":\"Chacko Daniel\",\"text\":\"Service Fabric deploys and manages distributed applications built as microservices\",\"url\":\"https://s.ch9.ms/Events/Build/2016/P431\",\"@search.action\":\"mergeOrUpload\"}\r\n    ]\r\n}\r\n```\r\n\r\n### (2) Case: column_names and key_names are NOT same\r\n\r\nSuppose you have the following config.yml and sample azure search index schema written above:\r\n\r\n<u>config.yml</u>\r\n\r\n```yaml\r\nin:\r\n  type: file\r\n  path_prefix: samples/sample_01.csv\r\n  parser:\r\n    charset: UTF-8\r\n    newline: CRLF\r\n    type: csv\r\n    delimiter: ','\r\n    quote: '\"'\r\n    escape: '\"'\r\n    null_string: 'NULL'\r\n    trim_if_not_quoted: false\r\n    skip_header_lines: 1\r\n    allow_extra_columns: false\r\n    allow_optional_columns: false\r\n    columns:\r\n    - {name: id, type: string}\r\n    - {name: title, type: string}\r\n    - {name: speakers, type: string}\r\n    - {name: description, type: string}\r\n    - {name: link, type: string}\r\nout:\r\n  type: azuresearch\r\n  endpoint: https://yoichikademo.search.windows.net\r\n  api_key:  9E55964F8254BBXX04D53F66A39AF5EB\r\n  search_index: sampleindex01\r\n  column_names: id,title,speakers,description,link\r\n  key_names: id,title,speakers,text,url\r\n```\r\n\r\n\r\nThe plugin will dump records out to Azure Ssearch like this:\r\n\r\n<u>Input CSV</u>\r\n\r\n```csv\r\nid,title,speakers,description,link\r\n1,Moving to the Cloud,Narayan Annamalai,Benefits of moving your applications to cloud,https://s.ch9.ms/Events/Build/2016/P576\r\n2,Building Big Data Applications using Spark and Hadoop,Maxim Lukiyanov,How to leverage Spark to build intelligence into your application,https://s.ch9.ms/Events/Build/2016/P420\r\n3,Service Fabric Deploying and Managing Applications with Service Fabric,Chacko Daniel,Service Fabric deploys and manages distributed applications built as microservices,https://s.ch9.ms/Events/Build/2016/P431\r\n```\r\n\r\n<u>Output JSON Body to Azure Search</u>\r\n\r\n```json\r\n{\"value\":\r\n    [\r\n        {\"id\":\"1\",\"title\":\"Moving to the Cloud\",\"speakers\":\"Narayan Annamalai\",\"text\":\"Benefits of moving your applications to cloud\",\"url\":\"https://s.ch9.ms/Events/Build/2016/P576\",\"@search.action\":\"mergeOrUpload\"},\r\n        {\"id\":\"2\",\"title\":\"Building Big Data Applications using Spark and Hadoop\",\"speakers\":\"Maxim Lukiyanov\",\"text\":\"How to leverage Spark to build intelligence into your application\",\"url\":\"https://s.ch9.ms/Events/Build/2016/P420\",\"@search.action\":\"mergeOrUpload\"},\r\n        {\"id\":\"3\",\"title\":\"Service Fabric Deploying and Managing Applications with Service Fabric\",\"speakers\":\"Chacko Daniel\",\"text\":\"Service Fabric deploys and manages distributed applications built as microservices\",\"url\":\"https://s.ch9.ms/Events/Build/2016/P431\",\"@search.action\":\"mergeOrUpload\"}\r\n    ]\r\n}\r\n```\r\n\r\n\r\n## Build, Install, and Run\r\n\r\n```\r\n$ rake\r\n\r\n$ embulk gem install pkg/embulk-output-azuresearch-0.1.0.gem\r\n\r\n$ embulk preview config.yml\r\n\r\n$ embulk run config.yml\r\n\r\n```\r\n\r\n## Change log\r\n* [Changelog](ChangeLog.md)\r\n\r\n## Links\r\n\r\n* http://yokawasa.github.io/embulk-output-azuresearch\r\n* https://rubygems.org/gems/embulk-output-azuresearch/\r\n* http://unofficialism.info/posts/embulk-plugins-for-microsoft-azure-services/\r\n\r\n## Contributing\r\n\r\nBug reports and pull requests are welcome on GitHub at https://github.com/yokawasa/embulk-output-azuresearch.\r\n\r\n## Copyright\r\n\r\n<table>\r\n  <tr>\r\n    <td>Copyright</td><td>Copyright (c) 2016- Yoichi Kawasaki</td>\r\n  </tr>\r\n  <tr>\r\n    <td>License</td><td>MIT</td>\r\n  </tr>\r\n</table>\r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}